﻿<!DOCTYPE html>
<html lang="en">
<head>
    <title>POLiPayments Notification</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="../css/poli_notification.css">
</head>
<body onload="getTransaction()">
<!-----------------------header----------------->
<div class="header-wrap">
    <div class="container">
        <div class="top-header-content">
            <svg width="190.2px" height="40px" viewBox="0 0 183.2 30" fill="none" xmlns="http://www.w3.org/2000/svg"><g><g><g><path fill="#022873" d="M19.92,7.27c-1.14-0.72-2.34-1.16-3.59-1.32c-1.25-0.16-2.5-0.06-3.74,0.28c-1.24,0.35-2.36,0.91-3.35,1.69 c-0.99,0.78-1.8,1.77-2.42,2.98C6.19,12.1,5.88,13.47,5.88,15c0,1.53,0.31,2.9,0.93,4.11c0.62,1.21,1.43,2.2,2.42,2.98 c0.99,0.78,2.11,1.34,3.35,1.69c1.24,0.35,2.49,0.43,3.74,0.26c1.25-0.17,2.45-0.61,3.59-1.32c0.72-0.45,1.24-0.86,1.52-1.1 c0.16-0.14,0.38-0.18,0.58-0.1l4.61,1.79c0.34,0.13,0.47,0.55,0.27,0.85c-0.66,0.98-1.17,1.39-2.23,2.28 c-1.25,1.05-2.62,1.88-4.11,2.48c-1.49,0.6-3.04,0.96-4.67,1.06c-1.63,0.1-3.27-0.08-4.91-0.54c-1.62-0.43-3.1-1.12-4.45-2.05 c-1.36-0.94-2.52-2.04-3.48-3.31c-0.97-1.27-1.72-2.67-2.25-4.21C0.27,18.32,0,16.7,0,15c0-1.67,0.27-3.28,0.8-4.84 C1.33,8.6,2.08,7.19,3.05,5.93c0.97-1.27,2.13-2.37,3.48-3.31C7.89,1.68,9.37,1,10.99,0.57c1.64-0.46,3.28-0.64,4.91-0.54 c1.63,0.1,3.19,0.45,4.67,1.04c1.48,0.59,2.85,1.41,4.11,2.46c1.06,0.89,1.57,1.31,2.23,2.29c0.2,0.3,0.07,0.71-0.27,0.85 l-4.62,1.83c-0.2,0.08-0.43,0.04-0.59-0.1C21.15,8.14,20.63,7.72,19.92,7.27z"></path></g><path fill="#1AADFF" d="M28.55,19.86l-8.25-2.78c-0.27-0.09-0.56,0.03-0.69,0.28c-0.92,1.78-2.86,2.96-5.05,2.76 c-2.41-0.21-4.38-2.14-4.64-4.54c-0.34-3.1,2.08-5.72,5.12-5.72c1.99,0,3.72,1.13,4.57,2.78c0.13,0.25,0.42,0.37,0.69,0.28 l8.26-2.79c0.3-0.1,0.62,0.06,0.73,0.36c1.36,3.87,0.43,7.63-0.01,9C29.18,19.8,28.85,19.96,28.55,19.86z"></path></g><g><path fill="#022873" d="M52.07,18.13c0.1,0,0.21,0.02,0.31,0.07l2.04,0.79c0.3,0.12,0.45,0.29,0.45,0.52c0,0.12-0.04,0.25-0.13,0.38 c-0.82,1.24-1.89,2.2-3.19,2.88c-1.3,0.68-2.71,1.02-4.22,1.02c-1.59,0-3.06-0.38-4.41-1.13c-1.35-0.76-2.44-1.79-3.24-3.11 c-0.79-1.32-1.19-2.74-1.19-4.27c0-1.51,0.4-2.92,1.19-4.23c0.79-1.31,1.87-2.35,3.23-3.11c1.35-0.76,2.82-1.15,4.42-1.15 c1.47,0,2.85,0.34,4.16,1.03c1.31,0.69,2.38,1.63,3.22,2.83c0.09,0.13,0.13,0.26,0.13,0.38c0,0.22-0.14,0.4-0.43,0.52l-2.04,0.79 c-0.1,0.04-0.22,0.07-0.34,0.07c-0.22,0-0.42-0.1-0.58-0.31c-0.54-0.64-1.17-1.15-1.9-1.53c-0.73-0.37-1.47-0.56-2.23-0.56 c-0.94,0-1.82,0.24-2.63,0.72c-0.81,0.48-1.45,1.13-1.93,1.95c-0.48,0.82-0.72,1.69-0.72,2.6c0,0.93,0.24,1.8,0.71,2.62 c0.47,0.82,1.11,1.46,1.92,1.94c0.81,0.49,1.69,0.74,2.65,0.74c0.79,0,1.56-0.18,2.3-0.55c0.74-0.37,1.36-0.88,1.85-1.54 C51.67,18.25,51.86,18.13,52.07,18.13z"></path><path fill="#022873" d="M59.22,22.9c-1.03-0.58-1.84-1.36-2.44-2.35c-0.6-0.97-0.9-2.05-0.9-3.23c0-1.15,0.3-2.22,0.9-3.21 c0.6-0.99,1.41-1.77,2.45-2.36c1.02-0.57,2.13-0.85,3.34-0.85c1.21,0,2.33,0.29,3.37,0.86s1.86,1.36,2.47,2.35 c0.6,0.97,0.9,2.04,0.9,3.21c0,1.15-0.3,2.22-0.91,3.21c-0.61,0.99-1.43,1.77-2.46,2.36c-1.03,0.58-2.15,0.88-3.37,0.88 C61.36,23.77,60.24,23.48,59.22,22.9z M60.87,14.3c-0.52,0.31-0.94,0.72-1.23,1.25c-0.3,0.55-0.45,1.15-0.45,1.77 c0,0.67,0.15,1.28,0.44,1.81s0.7,0.95,1.22,1.25c0.52,0.31,1.1,0.47,1.73,0.47s1.2-0.15,1.72-0.46s0.92-0.73,1.22-1.27 c0.3-0.55,0.45-1.15,0.45-1.8s-0.15-1.23-0.44-1.76c-0.29-0.53-0.7-0.95-1.22-1.27c-0.52-0.3-1.1-0.45-1.73-0.45 C61.96,13.84,61.39,14,60.87,14.3z"></path><path fill="#022873" d="M74.29,9.3c-0.36,0.35-0.79,0.53-1.3,0.53c-0.52,0-0.97-0.18-1.34-0.53c-0.37-0.35-0.55-0.78-0.55-1.29 c0-0.49,0.18-0.92,0.55-1.27c0.37-0.35,0.81-0.53,1.34-0.53c0.51,0,0.94,0.18,1.3,0.53c0.36,0.35,0.54,0.77,0.54,1.27 C74.83,8.52,74.65,8.95,74.29,9.3z M71.49,23.29c-0.12-0.12-0.18-0.28-0.18-0.49V11.82c0-0.21,0.06-0.37,0.18-0.49 c0.12-0.12,0.28-0.18,0.49-0.18H74c0.21,0,0.37,0.06,0.49,0.18c0.12,0.12,0.18,0.28,0.18,0.49V22.8c0,0.21-0.06,0.37-0.18,0.49 c-0.12,0.12-0.28,0.18-0.49,0.18h-2.02C71.77,23.47,71.61,23.41,71.49,23.29z"></path><path fill="#022873" d="M87.41,12.24c0.79,0.89,1.18,2.2,1.18,3.94v6.62c0,0.21-0.06,0.37-0.18,0.49c-0.12,0.12-0.28,0.18-0.49,0.18 h-2.09c-0.21,0-0.37-0.06-0.49-0.18c-0.12-0.12-0.18-0.28-0.18-0.49v-6.62c0-1.66-0.79-2.49-2.38-2.49 c-0.69,0-1.26,0.26-1.72,0.79c-0.46,0.52-0.67,1.35-0.64,2.47v5.86c0,0.21-0.06,0.37-0.18,0.49c-0.12,0.12-0.28,0.18-0.49,0.18h-2 c-0.21,0-0.37-0.06-0.49-0.18c-0.12-0.12-0.18-0.28-0.18-0.49v-11c0-0.21,0.06-0.37,0.18-0.49c0.12-0.12,0.28-0.18,0.49-0.18h2 c0.21,0,0.37,0.06,0.49,0.18c0.12,0.12,0.18,0.28,0.18,0.49v0.43c0.4-0.4,0.91-0.73,1.52-0.96s1.2-0.36,1.78-0.36 C85.4,10.9,86.63,11.35,87.41,12.24z"></path><path fill="#022873" d="M105.74,7.24c0.12,0.12,0.18,0.28,0.18,0.49V22.8c0,0.21-0.06,0.37-0.18,0.49c-0.12,0.12-0.28,0.18-0.49,0.18 h-2.18c-0.21,0-0.37-0.06-0.49-0.18c-0.12-0.12-0.18-0.28-0.18-0.49v-5.7h-7.7v5.7c0,0.21-0.06,0.37-0.18,0.49 c-0.12,0.12-0.28,0.18-0.49,0.18h-2.18c-0.21,0-0.37-0.06-0.49-0.18c-0.12-0.12-0.18-0.28-0.18-0.49V7.74 c0-0.21,0.06-0.37,0.18-0.49c0.12-0.12,0.28-0.18,0.49-0.18h2.18c0.21,0,0.37,0.06,0.49,0.18s0.18,0.28,0.18,0.49v6.29h7.7V7.74 c0-0.21,0.06-0.37,0.18-0.49s0.28-0.18,0.49-0.18h2.18C105.46,7.06,105.62,7.12,105.74,7.24z"></path><path fill="#022873" d="M118.06,23.29c-0.12-0.12-0.18-0.28-0.18-0.49v-0.56c-0.3,0.4-0.8,0.76-1.5,1.05 c-0.7,0.3-1.45,0.45-2.24,0.45c-1.26,0-2.36-0.28-3.3-0.84c-0.94-0.56-1.66-1.34-2.15-2.35c-0.49-0.97-0.74-2.06-0.74-3.25 c0-1.21,0.25-2.3,0.75-3.28c0.5-0.97,1.22-1.74,2.14-2.31c0.93-0.57,2.03-0.85,3.3-0.85c0.82,0,1.56,0.14,2.22,0.43 c0.66,0.28,1.17,0.66,1.53,1.12V11.8c0-0.21,0.06-0.37,0.18-0.49c0.12-0.12,0.28-0.18,0.49-0.18h1.98c0.21,0,0.37,0.06,0.49,0.18 c0.12,0.12,0.18,0.28,0.18,0.49v11c0,0.21-0.06,0.37-0.18,0.49c-0.12,0.12-0.28,0.18-0.49,0.18h-1.98 C118.35,23.47,118.18,23.41,118.06,23.29z M117.09,14.76c-0.62-0.64-1.44-0.97-2.46-0.97c-1.03,0-1.86,0.32-2.47,0.97 c-0.61,0.64-0.92,1.49-0.92,2.54c0,1.02,0.31,1.85,0.94,2.5c0.63,0.65,1.44,0.98,2.45,0.98c1.05,0,1.87-0.31,2.48-0.93 s0.91-1.47,0.91-2.55C118.02,16.25,117.71,15.41,117.09,14.76z"></path><path fill="#022873" d="M130.97,11.08c0.12,0.12,0.18,0.29,0.18,0.52v1.91c0,0.4-0.22,0.63-0.67,0.67c-0.48,0.03-0.96,0.15-1.44,0.35 c-0.48,0.2-0.91,0.51-1.3,0.93c-0.54,0.58-0.81,1.44-0.81,2.56v4.78c0,0.21-0.06,0.37-0.18,0.49c-0.12,0.12-0.28,0.18-0.49,0.18 h-2c-0.21,0-0.37-0.06-0.49-0.18c-0.12-0.12-0.18-0.28-0.18-0.49v-11c0-0.21,0.06-0.37,0.18-0.49c0.12-0.12,0.28-0.18,0.49-0.18h2 c0.21,0,0.37,0.06,0.49,0.18c0.12,0.12,0.18,0.28,0.18,0.49v0.97c0.43-0.57,0.97-1,1.59-1.3c0.63-0.3,1.28-0.48,1.95-0.54 C130.69,10.91,130.85,10.96,130.97,11.08z"></path><path fill="#022873" d="M135.39,23.31c-0.12,0.11-0.28,0.17-0.49,0.17h-1.98c-0.21,0-0.37-0.06-0.49-0.18 c-0.12-0.12-0.18-0.28-0.18-0.49V7.18c0-0.21,0.06-0.37,0.18-0.49c0.12-0.12,0.28-0.18,0.49-0.18h1.98c0.21,0,0.37,0.06,0.49,0.18 c0.12,0.12,0.18,0.28,0.18,0.49v5.23c0.36-0.46,0.87-0.84,1.53-1.12c0.66-0.28,1.4-0.43,2.22-0.43c1.24,0,2.33,0.28,3.28,0.84 s1.67,1.34,2.18,2.32c0.49,0.99,0.74,2.08,0.74,3.28c0,1.21-0.25,2.3-0.74,3.28s-1.2,1.74-2.13,2.31 c-0.96,0.57-2.07,0.85-3.32,0.85c-0.79,0-1.54-0.15-2.24-0.45c-0.7-0.3-1.21-0.65-1.5-1.05v0.61 C135.57,23.04,135.51,23.19,135.39,23.31z M136.35,19.85c0.61,0.62,1.43,0.93,2.48,0.93c1,0,1.82-0.33,2.45-0.98 c0.63-0.65,0.94-1.49,0.94-2.5c0-1.05-0.31-1.89-0.92-2.54c-0.61-0.64-1.44-0.97-2.47-0.97c-1.02,0-1.84,0.32-2.46,0.97 c-0.62,0.64-0.93,1.49-0.93,2.54C135.44,18.38,135.74,19.23,136.35,19.85z"></path><path fill="#022873" d="M150.11,22.9c-1.03-0.58-1.84-1.36-2.44-2.35c-0.6-0.97-0.9-2.05-0.9-3.23c0-1.15,0.3-2.22,0.9-3.21 c0.6-0.99,1.41-1.77,2.45-2.36c1.02-0.57,2.13-0.85,3.34-0.85c1.21,0,2.33,0.29,3.37,0.86s1.86,1.36,2.47,2.35 c0.6,0.97,0.9,2.04,0.9,3.21c0,1.15-0.3,2.22-0.91,3.21c-0.61,0.99-1.43,1.77-2.46,2.36c-1.03,0.58-2.15,0.88-3.37,0.88 C152.25,23.77,151.13,23.48,150.11,22.9z M151.76,14.3c-0.52,0.31-0.94,0.72-1.23,1.25c-0.3,0.55-0.45,1.15-0.45,1.77 c0,0.67,0.15,1.28,0.44,1.81s0.7,0.95,1.22,1.25c0.52,0.31,1.1,0.47,1.73,0.47s1.2-0.15,1.72-0.46s0.92-0.73,1.22-1.27 c0.3-0.55,0.45-1.15,0.45-1.8s-0.15-1.23-0.44-1.76c-0.29-0.53-0.7-0.95-1.22-1.27c-0.52-0.3-1.1-0.45-1.73-0.45 C152.85,13.84,152.28,14,151.76,14.3z"></path><path fill="#022873" d="M161.79,18.47v-6.62c0-0.21,0.06-0.37,0.18-0.49c0.12-0.12,0.28-0.18,0.49-0.18h2.04 c0.21,0,0.37,0.06,0.49,0.18c0.12,0.12,0.18,0.28,0.18,0.49v6.62c0,0.85,0.21,1.48,0.63,1.87s1.01,0.59,1.77,0.59 c0.7,0,1.28-0.27,1.74-0.8c0.46-0.53,0.66-1.34,0.62-2.44v-5.86c0-0.21,0.06-0.37,0.18-0.49c0.12-0.12,0.28-0.18,0.49-0.18h2.02 c0.21,0,0.37,0.06,0.49,0.18c0.12,0.12,0.18,0.28,0.18,0.49V22.8c0,0.21-0.06,0.37-0.18,0.49c-0.12,0.12-0.28,0.18-0.49,0.18 h-2.02c-0.21,0-0.37-0.06-0.49-0.18c-0.12-0.12-0.18-0.28-0.18-0.49v-0.38c-0.4,0.42-0.89,0.74-1.47,0.98 c-0.58,0.23-1.19,0.35-1.83,0.35C163.4,23.74,161.79,21.98,161.79,18.47z"></path><path fill="#022873" d="M183.02,11.08c0.12,0.12,0.18,0.29,0.18,0.52v1.91c0,0.4-0.22,0.63-0.67,0.67c-0.48,0.03-0.96,0.15-1.44,0.35 c-0.48,0.2-0.91,0.51-1.3,0.93c-0.54,0.58-0.81,1.44-0.81,2.56v4.78c0,0.21-0.06,0.37-0.18,0.49c-0.12,0.12-0.28,0.18-0.49,0.18 h-2c-0.21,0-0.37-0.06-0.49-0.18c-0.12-0.12-0.18-0.28-0.18-0.49v-11c0-0.21,0.06-0.37,0.18-0.49c0.12-0.12,0.28-0.18,0.49-0.18h2 c0.21,0,0.37,0.06,0.49,0.18c0.12,0.12,0.18,0.28,0.18,0.49v0.97c0.43-0.57,0.97-1,1.59-1.3c0.63-0.3,1.28-0.48,1.95-0.54 C182.74,10.91,182.9,10.96,183.02,11.08z"></path></g></g></svg>
        </div>
    </div>
</div>
<!-------------------end--------------->
<!----------------------details-wrap------------->
<div class="details-section-wrap">
    <h3>Details</h3>
    <div class="container">
        <div class="details-wrap">
            <table class="table mb-0">
                <tbody id="transactionDetails">
                <tr><td>POLi ID</td> <td> -- </td></tr>
                <tr><td>Transaction ID</td> <td> -- </td></tr>
                <tr><td>Transaction Status</td> <td> -- </td></tr>
                <tr><td>Merchant Name</td> <td> -- </td></tr>
                <tr><td>Payment Amount</td> <td> -- </td></tr>
                <tr><td>Amount Paid</td> <td> -- </td></tr>
                <tr><td>Bank Receipt</td> <td> -- </td></tr>
                </tbody>
            </table>
        </div>
    </div>
</div>
<!------------------end--------------->
<!-----------------------content-section-wrap------------->
<div id="errorBlock" class="d-none mt-4">
    <div class="content-section-wrap">
        <h3>What just happened?</h3>
        <div class="container">
            <p id="errorMessage"></p>
        </div>
    </div>
    <div class="content-section-wrap">
        <h3>What should I do now?</h3>
        <div class="container">
            <p id="errorSolution"></p>
        </div>
    </div>
</div>
<!-------------------------end--------------->
<!-------------return-bttn-wrap-------------->
<div class="return-bttn">
    <div class="container">
        <a href="/" class="cstm-bttn">Return to CoinHarbour Coins</a>
    </div>
</div>
<!-------------end---------->
</body>
</html>
<script>
    const url = window.location;
    const token = new URLSearchParams(url.search).get('token');

    function getTransaction() {

        const headers = new Headers();
        headers.append("Content-Type", "application/xml");
        headers.append("Authorization", "Basic UzYxMDM5ODc6Um9vc15eMjAyMA==");
        const requestOptions = {
            method: 'GET',
            headers: headers,
            redirect: 'follow'
        };

        fetch("https://poliapi.apac.paywithpoli.com/api/v2/Transaction/GetTransaction?token=" + token, requestOptions)
            .then(response => response.text())
            .then(result => {
                console.log(result);
                const data = JSON.parse(result);
                const transactionDetail = document.getElementById("transactionDetails")
                let errors;
                transactionDetail.innerHTML =
                    "<tr><td>POLi ID</td> <td>" + data.TransactionRefNo + "</td></tr>" +
                    "<tr><td>Transaction ID</td> <td>" + data.TransactionID + "</td></tr>" +
                    "<tr><td>Transaction Status</td> <td>" + data.TransactionStatus + "</td></tr>"+
                    "<tr><td>Merchant Name</td> <td>" + data.MerchantName + "</td></tr>" +
                    "<tr><td>Payment Amount</td> <td> $ " + data.PaymentAmount + "</td></tr>" +
                    "<tr><td>Amount Paid</td> <td> $ " +  + data.AmountPaid + "</td></tr>" +
                    "<tr><td>Bank Receipt</td> <td>" + data.BankReceipt + "</td></tr>"
                    if(data.ErrorCode != null){
                        transactionDetail.innerHTML +=
                        "<tr><td>Error Code</td> <td>" + data.ErrorCode + "</td></tr>"
                        document.getElementById("errorBlock").classList.replace("d-none", "d-block");
                        errors= data.ErrorMessage.split(';')
                        document.getElementById("errorMessage").innerHTML= errors[0]
                        document.getElementById("errorSolution").innerHTML= errors[1]
                    }
            })

            .catch(error => {
                console.log('error', error);
                document.getElementById("transactionDetails").innerHTML = error;
            });
    }

</script>
